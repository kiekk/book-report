### 지시어

| 지시어                         | 설명                                                                                 |
|-----------------------------|------------------------------------------------------------------------------------|
| break                       | break 지시어는 더 이상의 rewrite 지시어를 방지하는 데 사용됩니다. 이 지점 이후에는 URI가 고정돼 변경할 수 없습니다.         |
| return                      | 요청을 처리하는 것을 중단하고 특정 HTTP 상태 코드나 지정된 문자를 반환합니다.                                     |
| set                         | 변수를 초기화하거나 다시 정의합니다.<br/>어떤 변수는 재정의할 수 없습니다. ex) $uri                              |
| uninitialized_variable_warn | on으로 설정하면 아직 초기화되지 않은 변수를 구성에서 사용할 때 엔진엑스가 로그 메시지를 출력합니다.                          |
| rewrite_log                 | on으로 설정하면 rewrite 엔진이 수행하는 모든 동작에 엔진엑스가 notice 오류 수준에서 로그 메시지를 발행합니다.              |

`rewrite`
- 구문: `rewrite 정규식 대체 [플래그]`;
- 현재 요청의 URI를 rewrite 할 수 있게 해줍니다.
- 해당 요청은 rewrite된 URI에 따라 처리 방식이 바뀝니다.

#### 플래그
##### `last`
- 현재 rewrite 규칙이 적용될 규칙 중 마지막이어야 합니다.
- 이 규칙이 적용되고 나면 엔진엑스는 rewrite 작업을 끝내고 새 URI를 처리하기 시작하고 대응될 location 블록을 찾습니다.
- 그 이상의 rewrite 규칙은 무시됩니다.

##### `break`
- 현재 재작성 규칙이 적용되기는 하지만 엔진엑스가 수정된 URI로 새 요청을 처리하지 않습니다. (일치하는 location 블록을 찾지 않습니다.)
- 이후 모든 rewrite 지시어는 무시됩니다.

##### `redirect`
- "302 임시 이동" HTTP 응답이 반환됩니다.
- 대체된 URI는 location 헤더 값으로 사용됩니다.

##### `permanent`
- "301 영구 이동" HTTP 응답을 반환합니다.
- 대체된 URI는 location 헤더 값으로 사용됩니다.

#### `http://`
- `http://`로 시작하는 대체 URI를 지정하면 엔진엑스는 자동으로 `redirect` 플래그를 사용합니다.

#### 인자 포함 여부
- `http://website.com/page.php?id=1&p=2` 같은 요청의 경우 URI는 /page.php입니다.
- 이 URI를 rewrite할 때 엔진엑스가 알아서 해주기 때문에 대체 URI에 인자를 포함하도록 신경 쓸 필요가 없습니다.
- rewrite된 URI에 엔진엑스가 인자를 추가하게 하기 싫다면 rewrite ^/ search/(.*)$ /search.php?q=$1? 처럼 대체 URI 끝에 `?` 문자를 추가해야 합니다.